<p-toast></p-toast>

<div class="workspace-container">
  <div class="header d-flex justify-content-between align-items-center flex-wrap mb-4">
    <h3 class="fw-bold mb-3">Workspaces</h3>
    <button pButton label=" New Workspace" icon="pi pi-plus" class="btn-new p-button-success" (click)="newWorkspace()"></button>
  </div>

  <div *ngIf="loading" class="loading d-flex justify-content-center align-items-center">
    <i class="pi pi-spin pi-spinner" style="font-size: 2rem; color: #0d6efd;"></i>
  </div>

  <div *ngIf="error" class="error mb-3">{{ error }}</div>

  <p-table
    [value]="workspaces"
    [paginator]="true"
    [rows]="8"
    [rowsPerPageOptions]="[5,8,15,25]"
    [responsiveLayout]="'scroll'"
    class="workspace-table shadow-sm"
    *ngIf="!loading && workspaces.length > 0"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Name</th>
        <th>Created By</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-ws>
      <tr>
        <td>{{ ws.name }}</td>
        <td>{{ ws.createdBy }}</td>
        <td>
          <button pButton icon="pi pi-eye" class="action-btn view-btn me-2" (click)="view(ws._id)"></button>
          <button pButton icon="pi pi-pencil" class="action-btn edit-btn me-2" (click)="edit(ws._id)"></button>
          <button pButton icon="pi pi-trash" class="action-btn delete-btn" (click)="delete(ws._id)"></button>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="3" class="text-center">No workspaces found.</td>
      </tr>
    </ng-template>
  </p-table>

  <p *ngIf="!loading && workspaces.length === 0" class="text-center mt-4">No workspaces found.</p>
</div>
